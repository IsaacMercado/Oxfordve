<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="acceder_a_contactos_de_acuerdo_a_las_ramas" model="ir.rule">
            <field name="name">Regla para acceder a contactos de acuerdo a las ramas permitidas </field>
            <field name="perm_read" eval="1" />
            <field name="perm_write" eval="1" />
            <field name="perm_create" eval="1" />
            <field name="perm_unlink" eval="1" />
            <field name="domain_force">['|', '|', '|', ('branch_id', '=', False), ('branch_id', 'in', [b.id for b in user.branch_ids]), 
                 ('branch_id', '=', user.branch_id.id), ('branch_id', '=', 1 )]</field>
            <field name="model_id" ref="base.model_res_partner" />
            <field name="global" eval="True" />
        </record>

        <record id="acceder_a_usuarios_de_acuerdo_a_las_ramas" model="ir.rule">
            <field name="name">Regla para acceder a usuarios de acuerdo a las ramas permitidas </field>
            <field name="perm_read" eval="1" />
            <field name="perm_write" eval="1" />
            <field name="perm_create" eval="1" />
            <field name="perm_unlink" eval="1" />
            <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids),
                '|', ('branch_id', '=', False), ('branch_id', 'in', [b.id for b in user.branch_ids])]</field>
            <field name="model_id" ref="base.model_res_users" />
            <field name="global" eval="True" />
        </record>
    </data>
</odoo>